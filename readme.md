

## Setup env vars
You'll need to put a .env file in functions\stripe-webhook, and define STRIPE_API_KEY and STRIPE_WEBHOOK_SIGNING_SECRET. Stripe API Key comes from the developer portal on stripe's website, and the signing secret is generated by the stripe CLI when you establish the connection between stripe and your server.

## Test locally

- Terminal 1:
  - `supabase functions serve --no-verify-jwt --env-file ./supabase/functions/stripe-webhook/.env`
- Terminal 2:
  - `stripe listen --forward-to localhost:54321/functions/v1/stripe-webhook`
- Terminal 3 (optional):
  - `stripe trigger payment_intent.succeeded`

## Deploy

- `supabase functions deploy --no-verify-jwt stripe-webhooks`
- `supabase secrets set --env-file ./supabase/.env.local`

## Credit
Based on this repo: https://github.com/supabase/supabase/tree/master/examples/edge-functions/supabase/functions/stripe-webhooks